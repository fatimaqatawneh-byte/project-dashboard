<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 10px;
            font-weight: normal;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card.accent {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .stat-card.accent h3,
        .stat-card.accent .stat-value {
            color: white;
        }

        .section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f8f9fa;
            color: #333;
            font-weight: bold;
            padding: 15px;
            text-align: right;
            border-bottom: 2px solid #ddd;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .progress-bar {
            background: #eee;
            border-radius: 10px;
            height: 25px;
            overflow: hidden;
            margin: 5px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .currency {
            font-weight: bold;
            color: #667eea;
        }

        .warning-section {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .data-updated {
            text-align: center;
            color: #999;
            font-size: 0.9em;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.9em;
            }

            th, td {
                padding: 10px;
            }

            header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Ù„ÙˆØ­Ø© Ù…Ø´Ø§Ø±ÙŠØ¹ Ø£Ø´ØºØ§Ù„ Ù…Ø­Ø§ÙØ¸Ø© Ø§Ù„ÙƒØ±Ùƒ</h1>
            <p>Ù†Ø¸Ø§Ù… Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</p>
        </header>

        <div id="content">
            <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
        </div>
    </div>

    <script>
        // Fetch and display data from data.json
        async function loadDashboard() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) throw new Error('Failed to load data');
                
                const data = await response.json();
                displayDashboard(data);
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('content').innerHTML = `
                    <div class="warning-section">
                        Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù…Ù„Ù data.json Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯.
                    </div>
                `;
            }
        }

        function displayDashboard(data) {
            // Calculate statistics
            const totalBudget = data.projects.reduce((sum, p) => sum + p.budget, 0);
            const totalSpent = data.projects.reduce((sum, p) => sum + p.spent, 0);
            const spendPercentage = totalBudget > 0 ? Math.round((totalSpent / totalBudget) * 100) : 0;
            const remaining = totalBudget - totalSpent;
            
            const statusCounts = {
                pending: data.projects.filter(p => p.status === 'Ù…Ø¹Ù„Ù‚').length,
                active: data.projects.filter(p => p.status === 'Ø¬Ø§Ø±ÙŠ').length,
                completed: data.projects.filter(p => p.status === 'Ù…ÙƒØªÙ…Ù„').length
            };

            const avgProgress = data.projects.length > 0 
                ? Math.round(data.projects.reduce((sum, p) => sum + p.progress, 0) / data.projects.length)
                : 0;

            let html = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>ğŸ“Œ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ù…Ø®ØµØµØ©</h3>
                        <div class="stat-value"><span class="currency">${totalBudget.toLocaleString('ar-JO')}</span></div>
                        <p>Ø¯.Ø§</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ“Œ Ø§Ù„Ù…ØµØ±ÙˆÙ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</h3>
                        <div class="stat-value"><span class="currency">${totalSpent.toLocaleString('ar-JO')}</span></div>
                        <p>Ø¯.Ø§</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ“Œ Ù†Ø³Ø¨Ø© Ø§Ù„ØµØ±Ù</h3>
                        <div class="stat-value">${spendPercentage}%</div>
                    </div>
                    <div class="stat-card accent">
                        <h3>ğŸ“Œ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¬Ø§Ø±ÙŠØ©</h3>
                        <div class="stat-value">${statusCounts.active}</div>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ“ˆ Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…</h2>
                    <table>
                        <tr>
                            <th>Ø§Ù„Ù…Ø¤Ø´Ø±</th>
                            <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                        </tr>
                        <tr>
                            <td><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</strong></td>
                            <td>${data.projects.length}</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</strong></td>
                            <td>${statusCounts.pending}</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ø¬Ø§Ø±ÙŠØ©</strong></td>
                            <td>${statusCounts.active}</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</strong></td>
                            <td>${statusCounts.completed}</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</strong></td>
                            <td><span class="currency">${totalBudget.toLocaleString('ar-JO')}</span> Ø¯.Ø§</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ù…ØµØ±ÙˆÙ</strong></td>
                            <td><span class="currency">${totalSpent.toLocaleString('ar-JO')}</span> Ø¯.Ø§</td>
                        </tr>
                        <tr>
                            <td><strong>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</strong></td>
                            <td><span class="currency">${remaining.toLocaleString('ar-JO')}</span> Ø¯.Ø§</td>
                        </tr>
                        <tr>
                            <td><strong>Ù†Ø³Ø¨Ø© Ø§Ù„ØµØ±Ù</strong></td>
                            <td>${spendPercentage}%</td>
                        </tr>
                        <tr>
                            <td><strong>Ù…ØªÙˆØ³Ø· Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</strong></td>
                            <td>${avgProgress}%</td>
                        </tr>
                    </table>
                </div>

                ${data.projects.length === 0 ? `
                    <div class="warning-section">
                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹. ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù…Ù„Ù data.json.
                    </div>
                ` : `
                    <div class="section">
                        <h2>ğŸ“‹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ù…ØªØ§Ø¨Ø¹Ø© Ø¯Ù‚ÙŠÙ‚Ø©</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</th>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                    <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
                                    <th>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</th>
                                    <th>Ø§Ù„Ù…ØµØ±ÙˆÙ</th>
                                    <th>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² %</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.projects.map((project, index) => `
                                    <tr>
                                        <td>${project.id || index + 1}</td>
                                        <td>${project.name}</td>
                                        <td>${project.type}</td>
                                        <td>${project.location}</td>
                                        <td><span class="currency">${project.budget.toLocaleString('ar-JO')}</span> Ø¯.Ø§</td>
                                        <td><span class="currency">${project.spent.toLocaleString('ar-JO')}</span> Ø¯.Ø§</td>
                                        <td>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: ${project.progress}%">
                                                    ${project.progress}%
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge ${
                                                project.status === 'Ù…Ø¹Ù„Ù‚' ? 'status-pending' :
                                                project.status === 'Ø¬Ø§Ø±ÙŠ' ? 'status-active' :
                                                'status-completed'
                                            }">
                                                ${project.status}
                                            </span>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `}

                <div class="data-updated">
                    âœ“ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­
                </div>
            `;

            document.getElementById('content').innerHTML = html;
        }

        // Load dashboard when page opens
        loadDashboard();

        // Reload data every 30 seconds (optional - remove if not needed)
        // setInterval(loadDashboard, 30000);
    </script>
</body>
</html>
